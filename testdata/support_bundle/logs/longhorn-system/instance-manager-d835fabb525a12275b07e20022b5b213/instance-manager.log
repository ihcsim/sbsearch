2025-12-30T21:50:22.511571094Z Enabling tgtd
2025-12-30T21:50:22.512749965Z tgtd: work_timer_start(146) use timer_fd based scheduler
2025-12-30T21:50:22.512754944Z tgtd: bs_init(387) use signalfd notification
2025-12-30T21:50:22.528770481Z time="2025-12-30T21:50:22.528407531Z" level=info msg="Storing process logs at path: /var/log/instances" func=util.SetUpLogger file="log.go:62"
2025-12-30T21:50:22.536104267Z [longhorn-instance-manager] time="2025-12-30T21:50:22.53595544Z" level=warning msg="Failed to add TLS key pair from /tls-files/" func=cmd.start file="start.go:176" error="open /tls-files/tls.crt: no such file or directory"
2025-12-30T21:50:22.536118723Z [longhorn-instance-manager] time="2025-12-30T21:50:22.53603326Z" level=info msg="Creating gRPC server with no auth" func=cmd.start file="start.go:183"
2025-12-30T21:50:22.536218973Z [longhorn-instance-manager] time="2025-12-30T21:50:22.536157853Z" level=info msg="Debug pprof server listening on :6060" func=cmd.start.func2 file="start.go:189"
2025-12-30T21:50:22.536875869Z [longhorn-instance-manager] time="2025-12-30T21:50:22.536772154Z" level=info msg="process-manager gRPC server listening to :8500" func=cmd.start.func4 file="start.go:290"
2025-12-30T21:50:22.536959510Z [longhorn-instance-manager] time="2025-12-30T21:50:22.536907626Z" level=info msg="instance gRPC server listening to :8503" func=cmd.start.func4 file="start.go:290"
2025-12-30T21:50:22.536996465Z [longhorn-instance-manager] time="2025-12-30T21:50:22.536949271Z" level=info msg="proxy gRPC server listening to :8501" func=cmd.start.func4 file="start.go:290"
2025-12-30T21:50:22.537038631Z [longhorn-instance-manager] time="2025-12-30T21:50:22.536925369Z" level=info msg="disk gRPC server listening to :8502" func=cmd.start.func4 file="start.go:290"
2025-12-30T21:50:23.268271572Z [longhorn-instance-manager] time="2025-12-30T21:50:23.268132491Z" level=info msg="Start watching instances" func="instance.(*Server).InstanceWatch" file="instance.go:550"
2025-12-30T21:50:23.268330016Z [longhorn-instance-manager] time="2025-12-30T21:50:23.268296195Z" level=info msg="Start watching processes" func="instance.(*Server).watchProcess" file="instance.go:712"
2025-12-30T21:50:23.268392068Z [longhorn-instance-manager] time="2025-12-30T21:50:23.268346515Z" level=info msg="Start handling notify" func="instance.(*Server).handleNotify" file="instance.go:534"
2025-12-30T21:50:23.286931079Z [longhorn-instance-manager] time="2025-12-30T21:50:23.286805564Z" level=info msg="Started new process manager update watch" func="process.(*Manager).ProcessWatch" file="process_manager.go:389"
2025-12-30T21:50:23.381163256Z [longhorn-instance-manager] time="2025-12-30T21:50:23.380953109Z" level=warning msg="Updating log level from debug to info" func=instance.logSetLevel file="log.go:40"
2025-12-30T21:58:03.502652339Z [longhorn-instance-manager] time="2025-12-30T21:58:03.502307606Z" level=info msg="Creating instance" func="instance.(*Server).InstanceCreate" file="instance.go:116" dataEngine=DATA_ENGINE_V1 name=pvc-a30f7311-cc82-4e85-89d6-144156fce238-r-06057446 type=replica upgradeRequired=false
2025-12-30T21:58:03.502686043Z [longhorn-instance-manager] time="2025-12-30T21:58:03.502444906Z" level=info msg="Creating process" func="client.(*ProcessManagerClient).ProcessCreate" file="process_manager.go:98" args="[--volume-name pvc-a30f7311-cc82-4e85-89d6-144156fce238 replica /host/var/lib/harvester/defaultdisk/replicas/pvc-a30f7311-cc82-4e85-89d6-144156fce238-8b8272f4 --size 10737418240 --backing-file /host/var/lib/harvester/defaultdisk/backing-images/vmi-5987e3f0-076b-438e-82a4-f635689704b3-c22539a2/backing --disableRevCounter --replica-instance-name pvc-a30f7311-cc82-4e85-89d6-144156fce238-r-06057446 --snapshot-max-count 250 --snapshot-max-size 0 --sync-agent-port-count 7]" binary=/host/var/lib/longhorn/engine-binaries/longhornio-longhorn-engine-v1.10.1/longhorn name=pvc-a30f7311-cc82-4e85-89d6-144156fce238-r-06057446 portArgs="[--listen,:]" portCount=10
2025-12-30T21:58:03.504023909Z [longhorn-instance-manager] time="2025-12-30T21:58:03.503903931Z" level=info msg="Process Manager: prepare to create process pvc-a30f7311-cc82-4e85-89d6-144156fce238-r-06057446" func="process.(*Manager).ProcessCreate" file="process_manager.go:189"
2025-12-30T21:58:03.504102578Z [longhorn-instance-manager] time="2025-12-30T21:58:03.504057482Z" level=info msg="Process Manager: created process pvc-a30f7311-cc82-4e85-89d6-144156fce238-r-06057446" func="process.(*Manager).ProcessCreate" file="process_manager.go:226"
2025-12-30T21:58:03.536740485Z [pvc-a30f7311-cc82-4e85-89d6-144156fce238-r-06057446] time="2025-12-30T21:58:03.536267178Z" level=info msg="Creating replica /host/var/lib/harvester/defaultdisk/replicas/pvc-a30f7311-cc82-4e85-89d6-144156fce238-8b8272f4, size 10737418240/512" func="replica.(*Server).Create" file="server.go:59"
2025-12-30T21:58:03.538929254Z [pvc-a30f7311-cc82-4e85-89d6-144156fce238-r-06057446] time="2025-12-30T21:58:03.536628051Z" level=warning msg="Recovering volume metafile /host/var/lib/harvester/defaultdisk/replicas/pvc-a30f7311-cc82-4e85-89d6-144156fce238-8b8272f4/volume.meta, and replica info: {Size:10737418240 Head: Dirty:false Rebuilding:false Error: Parent: SectorSize:512 BackingFilePath: BackingFile:<nil>}" func="replica.(*Replica).tryRecoverVolumeMetaFile" file="replica.go:1135"
2025-12-30T21:58:03.538942519Z time="2025-12-30T21:58:03.537263787Z" level=info msg="Starting to create disk" func="replica.(*Replica).createDisk" file="replica.go:908" disk=000
2025-12-30T21:58:03.538944603Z time="2025-12-30T21:58:03.537660829Z" level=info msg="Finished creating disk" func="replica.(*Replica).createDisk" file="replica.go:1008" disk=000
2025-12-30T21:58:03.540771777Z [pvc-a30f7311-cc82-4e85-89d6-144156fce238-r-06057446] time="2025-12-30T21:58:03.538818043Z" level=info msg="Listening on data server :10001" func=cmd.startReplica.func3 file="replica.go:179"
2025-12-30T21:58:03.540779220Z time="2025-12-30T21:58:03.538832189Z" level=info msg="Listening on sync agent server :10002" func=cmd.startReplica.func4 file="replica.go:210"
2025-12-30T21:58:03.540781154Z time="2025-12-30T21:58:03.539083376Z" level=info msg="Listening on gRPC Replica server :10000" func=cmd.startReplica.func2 file="replica.go:169"
2025-12-30T21:58:03.549196957Z [pvc-a30f7311-cc82-4e85-89d6-144156fce238-r-06057446] time="2025-12-30T21:58:03.54896607Z" level=info msg="Listening on sync :10002" func=cmd.startSyncAgent file="sync_agent.go:89"
2025-12-30T21:58:03.619036272Z [longhorn-instance-manager] time="2025-12-30T21:58:03.618901346Z" level=info msg="Process pvc-a30f7311-cc82-4e85-89d6-144156fce238-r-06057446 has started at localhost:10000" func="process.(*GRPCHealthChecker).WaitForRunning" file="healthchecker.go:33"
2025-12-30T21:58:04.409119281Z [longhorn-instance-manager] time="2025-12-30T21:58:04.408808672Z" level=info msg="Creating instance" func="instance.(*Server).InstanceCreate" file="instance.go:116" dataEngine=DATA_ENGINE_V1 name=pvc-a30f7311-cc82-4e85-89d6-144156fce238-e-0 type=engine upgradeRequired=false
2025-12-30T21:58:04.409161260Z [longhorn-instance-manager] time="2025-12-30T21:58:04.408921215Z" level=info msg="Creating process" func="client.(*ProcessManagerClient).ProcessCreate" file="process_manager.go:98" args="[--engine-instance-name pvc-a30f7311-cc82-4e85-89d6-144156fce238-e-0 controller pvc-a30f7311-cc82-4e85-89d6-144156fce238 --frontend tgt-blockdev --disableRevCounter --size 10737418240 --current-size 0 --engine-replica-timeout 8 --file-sync-http-client-timeout 30 --snapshot-max-count 250 --snapshot-max-size 0 --replica tcp://10.52.0.60:10000]" binary=/engine-binaries/longhornio-longhorn-engine-v1.10.1/longhorn name=pvc-a30f7311-cc82-4e85-89d6-144156fce238-e-0 portArgs="[--listen,:]" portCount=1
2025-12-30T21:58:04.410980169Z [longhorn-instance-manager] time="2025-12-30T21:58:04.410894676Z" level=info msg="Process Manager: prepare to create process pvc-a30f7311-cc82-4e85-89d6-144156fce238-e-0" func="process.(*Manager).ProcessCreate" file="process_manager.go:189"
2025-12-30T21:58:04.411262253Z [longhorn-instance-manager] time="2025-12-30T21:58:04.411194434Z" level=info msg="Process Manager: created process pvc-a30f7311-cc82-4e85-89d6-144156fce238-e-0" func="process.(*Manager).ProcessCreate" file="process_manager.go:226"
2025-12-30T21:58:04.431082073Z [pvc-a30f7311-cc82-4e85-89d6-144156fce238-e-0] time="2025-12-30T21:58:04.43074863Z" level=info msg="Creating volume pvc-a30f7311-cc82-4e85-89d6-144156fce238 controller with iSCSI target request timeout 9m2s and engine to replica(s) timeout 8s" func=cmd.startController file="controller.go:193"
2025-12-30T21:58:04.432566627Z [pvc-a30f7311-cc82-4e85-89d6-144156fce238-e-0] time="2025-12-30T21:58:04.430940705Z" level=info msg="Starting with replicas [\"tcp://10.52.0.60:10000\"]" func=cmd.startController file="controller.go:209"
2025-12-30T21:58:04.432575984Z time="2025-12-30T21:58:04.430968086Z" level=info msg="Connecting to remote: 10.52.0.60:10000 (tcp)" func="remote.(*Factory).Create" file="remote.go:440"
2025-12-30T21:58:04.433896437Z [pvc-a30f7311-cc82-4e85-89d6-144156fce238-e-0] time="2025-12-30T21:58:04.433754948Z" level=info msg="Opening remote: 10.52.0.60:10000" func="remote.(*Remote).open" file="remote.go:84"
2025-12-30T21:58:04.433909121Z [pvc-a30f7311-cc82-4e85-89d6-144156fce238-r-06057446] time="2025-12-30T21:58:04.433694124Z" level=info msg="New connection from: 10.52.0.60:47140" func="rpc.(*DataServer).listenAndServeTCP" file="dataserver.go:57"
2025-12-30T21:58:04.433912848Z time="2025-12-30T21:58:04.433735843Z" level=info msg="New connection from: 10.52.0.60:47150" func="rpc.(*DataServer).listenAndServeTCP" file="dataserver.go:57"
2025-12-30T21:58:04.434888447Z [pvc-a30f7311-cc82-4e85-89d6-144156fce238-r-06057446] time="2025-12-30T21:58:04.434373231Z" level=info msg="Opening replica: dir /host/var/lib/harvester/defaultdisk/replicas/pvc-a30f7311-cc82-4e85-89d6-144156fce238-8b8272f4, size 10737418240, sector size 512" func="replica.(*Server).Open" file="server.go:79"
2025-12-30T21:58:04.434894599Z [pvc-a30f7311-cc82-4e85-89d6-144156fce238-e-0] time="2025-12-30T21:58:04.433767313Z" level=info msg="Data connection client loop started" func="dataconn.(*Client).loop" file="client.go:147" peerAddr="10.52.0.60:10001"
2025-12-30T21:58:04.437260925Z [pvc-a30f7311-cc82-4e85-89d6-144156fce238-e-0] time="2025-12-30T21:58:04.437169471Z" level=info msg="Adding backend: tcp://10.52.0.60:10000" func="controller.(*replicator).AddBackend" file="replicator.go:59"
2025-12-30T21:58:04.438316455Z [pvc-a30f7311-cc82-4e85-89d6-144156fce238-e-0] time="2025-12-30T21:58:04.437240656Z" level=info msg="Start monitoring tcp://10.52.0.60:10000" func="controller.(*Controller).monitoring" file="control.go:1480" volume=pvc-a30f7311-cc82-4e85-89d6-144156fce238
2025-12-30T21:58:04.438321485Z time="2025-12-30T21:58:04.437735625Z" level=info msg="Got backend tcp://10.52.0.60:10000 UnmapMarkSnapChainRemoved false" func="controller.(*replicator).GetUnmapMarkSnapChainRemoved" file="replicator.go:478"
2025-12-30T21:58:04.438325142Z time="2025-12-30T21:58:04.437751945Z" level=info msg="Controller checked and corrected flag unmapMarkSnapChainRemoved=false for backend replicas" func="controller.(*Controller).checkUnmapMarkSnapChainRemoved" file="control.go:779" volume=pvc-a30f7311-cc82-4e85-89d6-144156fce238
2025-12-30T21:58:04.463482479Z [pvc-a30f7311-cc82-4e85-89d6-144156fce238-e-0] time="2025-12-30T21:58:04.463258966Z" level=info msg="device pvc-a30f7311-cc82-4e85-89d6-144156fce238: iSCSI device /dev/longhorn/pvc-a30f7311-cc82-4e85-89d6-144156fce238 shutdown" func="longhorndev.(*LonghornDevice).shutdownFrontend" file="dev.go:209"
2025-12-30T21:58:05.465431648Z [pvc-a30f7311-cc82-4e85-89d6-144156fce238-e-0] go-iscsi-helper: tgtd is already running
2025-12-30T21:58:05.468590857Z tgtd: device_mgmt(246) sz:129 params:path=/var/run/longhorn-pvc-a30f7311-cc82-4e85-89d6-144156fce238.sock,bstype=longhorn,bsopts=size=10737418240;request_timeout=542
2025-12-30T21:58:05.468611647Z tgtd: bs_thread_open(409) 16
2025-12-30T21:58:05.475688070Z [pvc-a30f7311-cc82-4e85-89d6-144156fce238-e-0] time="2025-12-30T21:58:05.466148427Z" level=info msg="go-iscsi-helper: found available target id 1" func="iscsidev.(*Device).CreateTarget" file="iscsi.go:105"
2025-12-30T21:58:05.475703730Z time="2025-12-30T21:58:05.46908319Z" level=info msg="New data socket connection established" func="socket.(*Socket).handleServerConnection" file="frontend.go:145"
2025-12-30T21:58:05.516474653Z [longhorn-instance-manager] time="2025-12-30T21:58:05.516317926Z" level=info msg="Wait for gRPC service of process pvc-a30f7311-cc82-4e85-89d6-144156fce238-e-0 to start at localhost:10010" func="process.(*GRPCHealthChecker).WaitForRunning" file="healthchecker.go:36"
2025-12-30T21:58:05.558698220Z [pvc-a30f7311-cc82-4e85-89d6-144156fce238-e-0] time="2025-12-30T21:58:05.558298793Z" level=info msg="default: automatically rescan all LUNs of all iscsi sessions" func=iscsi.LoginTarget file="initiator.go:134"
2025-12-30T21:58:05.568348884Z [pvc-a30f7311-cc82-4e85-89d6-144156fce238-e-0] time="2025-12-30T21:58:05.567983492Z" level=info msg="Creating device /dev/longhorn/pvc-a30f7311-cc82-4e85-89d6-144156fce238 8:0" func=util.mknod file="util.go:100"
2025-12-30T21:58:05.568367308Z time="2025-12-30T21:58:05.568047753Z" level=info msg="device pvc-a30f7311-cc82-4e85-89d6-144156fce238: iSCSI device sda created" func="longhorndev.(*LonghornDevice).startScsiDevice" file="dev.go:138"
2025-12-30T21:58:05.569867431Z [pvc-a30f7311-cc82-4e85-89d6-144156fce238-e-0] time="2025-12-30T21:58:05.568238455Z" level=info msg="Listening on gRPC Controller server: :10010" func="controller.(*Controller).StartGRPCServer.func1" file="control.go:132" volume=pvc-a30f7311-cc82-4e85-89d6-144156fce238
2025-12-30T21:58:06.520327066Z [longhorn-instance-manager] time="2025-12-30T21:58:06.520198923Z" level=info msg="Wait for gRPC service of process pvc-a30f7311-cc82-4e85-89d6-144156fce238-e-0 to start at localhost:10010" func="process.(*GRPCHealthChecker).WaitForRunning" file="healthchecker.go:36"
2025-12-30T21:58:06.527658603Z [longhorn-instance-manager] time="2025-12-30T21:58:06.527534218Z" level=info msg="Process pvc-a30f7311-cc82-4e85-89d6-144156fce238-e-0 has started at localhost:10010" func="process.(*GRPCHealthChecker).WaitForRunning" file="healthchecker.go:33"
